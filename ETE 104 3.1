#include <stdio.h>
#include <msp430.h>
void blink()
{
    int i=0;
    int j=0;
    while(j<1)
    {
    P1OUT |= 0x01;
    P4OUT |= BIT7;
    for(i=10000; i>0; i--);
    P1OUT &= !0x01;
    P4OUT &=!BIT7;
    for(i=10000; i>0; i--);
      while (( P2IN & BIT1 ) == 0)
                  {
                      for(i=10000; i>0; i--);
                      if (P2IN & BIT1)
                      {
                      j=j+1;
                      }
                  }
    }
    return 0;
};
int main(void)
{
       WDTCTL = WDTPW | WDTHOLD;       // stop watchdog timer
       P1DIR |= 0x01;                  // configure P1.0 as output
       P4DIR |= BIT7;                  // configure P4.7 as output
       P2DIR &= !BIT1;                 // P2.1 AS INPUT
       P2REN |= BIT1;                  // P2.1 PULL UP/DOWN ACTIVE
       P2OUT |= BIT1;                  // P2.1 PULL UP
       P1OUT &=!BIT0;                  // P1.0 SET AS 0
       P4OUT &=!BIT7;
       volatile unsigned int i;        // volatile to prevent optimization
       volatile unsigned int j=0;
           while(1)
           {
           //  P1OUT &= !0x01;
              for(i=10000; i>0; i--);
              while (( P2IN & BIT1 ) == 0)
              {
                  for(i=10000; i>0; i--);
                  if (P2IN & BIT1 )
                  {
                      j=j+1;
                      switch (j)
        {
                      case 1:
                          P1OUT |= 0x01;
                          P4OUT |= BIT7;
                          break;
                      case 2:
                          blink();
                          P1OUT &=!BIT0;
                          P4OUT &=!BIT7;
                          j=0;
                          break;
        }
                  }
              }
           }
}
